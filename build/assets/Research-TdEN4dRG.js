import{c as q,r as i,j as e,B as g,P as V,Q as W,R as U,W as Z,Y as O,e as Q,f as G,Z as Y,g as J,h as F,i as P,b as E,m as A,G as X,d as ee,q as se,s as te,t as ae,u as ne,v as ie,_ as x,$ as re,p as K,O as le,K as oe,n as ce,X as de,T as me,a0 as he,a1 as ue}from"./index-Df8KC43h.js";import{S as xe}from"./scroll-area-jjQrZZEv.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],z=q("brain",pe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],ge=q("thumbs-down",fe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],be=q("thumbs-up",ye),B=[{id:"market-research",label:"Market Research",icon:U,description:"Market trends and analysis",color:"text-blue-500"},{id:"consumer-research",label:"Consumer Research",icon:Z,description:"Consumer behavior insights",color:"text-green-500"},{id:"competitor-analysis",label:"Competitor Analysis",icon:O,description:"Competitive landscape",color:"text-purple-500"},{id:"trend-analysis",label:"Trend Analysis",icon:U,description:"Industry trends tracking",color:"text-orange-500"}];function je({selectedType:l,onTypeSelect:j,onNewChat:m,onChatSelect:p,onDeleteSession:s,onSaveToLibrary:h,savedChats:d,currentChatId:w,currentContent:v}){const[b,y]=i.useState(""),[N,o]=i.useState("recent"),[C,k]=i.useState(!1),[f,D]=i.useState(""),M=d.filter(a=>a.title.toLowerCase().includes(b.toLowerCase())||a.type.toLowerCase().includes(b.toLowerCase())).sort((a,t)=>{switch(N){case"recent":return new Date(t.lastActivity).getTime()-new Date(a.lastActivity).getTime();case"type":return a.type.localeCompare(t.type);case"alphabetical":return a.title.localeCompare(t.title);default:return 0}}),R=a=>{const t=B.find(n=>n.id===a);return t?t.label:a.replace("-"," ")},$=a=>{const t=B.find(n=>n.id===a);return t?t.icon:P},I=(a,t)=>{a.stopPropagation(),s(t)},L=()=>{if(!v.trim()){x.error("No content to save");return}const a=R(l),t=v.trim().split(" ").slice(0,5).join(" "),n=`${a} - ${t}`.substring(0,50);D(n),k(!0)},T=()=>{if(!f.trim()){x.error("Please enter a filename");return}const a=f.trim().endsWith(".txt")?f.trim():`${f.trim()}.txt`;h(v,a),k(!1),D(""),x.success(`Research saved as "${a}" to Library!`)};return e.jsxs("div",{className:"w-64 h-full glass-sidebar flex flex-col",children:[e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs(g,{onClick:m,className:"w-full justify-start gap-3 h-10 bg-purple-600 hover:bg-purple-700 text-white shadow-[0_2px_6px_rgba(147,51,234,0.3)]",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"New Research"})]}),e.jsxs(g,{onClick:L,disabled:!v.trim(),className:"w-full justify-start gap-3 h-10 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white shadow-[0_2px_6px_rgba(107,114,128,0.3)]",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Save to Library"})]})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Research Types"}),e.jsx("div",{className:"space-y-1",children:B.map(a=>{const t=a.icon,n=l===a.id;return e.jsxs("button",{onClick:()=>j(a.id),className:`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-all duration-200 ${n?"form-card shadow-[0_2px_6px_rgba(99,102,241,0.2)] ring-2 ring-blue-500/30":"form-card hover:shadow-[0_2px_6px_rgba(0,0,0,0.15)]"}`,children:[e.jsx(t,{className:`w-4 h-4 ${n?"text-blue-500":a.color}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${n?"text-blue-600 dark:text-blue-400":"text-[var(--form-text)]"}`,children:a.label}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:a.description})]}),n&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]},a.id)})})]}),e.jsxs("div",{className:"flex-1 flex flex-col px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Research History"}),e.jsxs(Q,{children:[e.jsx(G,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:e.jsx(Y,{className:"w-3 h-3"})})}),e.jsxs(J,{align:"end",className:"w-32",children:[e.jsx(F,{onClick:()=>o("recent"),children:"Recent"}),e.jsx(F,{onClick:()=>o("type"),children:"By Type"}),e.jsx(F,{onClick:()=>o("alphabetical"),children:"A-Z"})]})]})]}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(E,{placeholder:"Search research...",value:b,onChange:a=>y(a.target.value),className:"pl-9 h-8 text-sm form-input"})]}),e.jsx(xe,{className:"flex-1",children:e.jsx("div",{className:"space-y-2 pr-2",children:M.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full glass-subtle flex items-center justify-center",children:e.jsx(P,{className:"w-5 h-5 text-muted-foreground"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b?"No research found":"No research history yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b?"Try a different search term":"Start researching to see your history here"})]}):M.map(a=>{const t=$(a.type),n=w===a.id;return e.jsxs(A.div,{className:`relative group w-full text-left p-3 rounded-lg transition-all duration-200 cursor-pointer ${n?"form-card shadow-[0_2px_6px_rgba(99,102,241,0.2)] ring-2 ring-blue-500/30 bg-blue-50 dark:bg-blue-500/10":"form-card hover:shadow-[0_2px_6px_rgba(0,0,0,0.15)]"}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{y:-1},onClick:()=>p(a.id),children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx(t,{className:`w-3 h-3 mt-0.5 flex-shrink-0 ${n?"text-blue-500":"text-muted-foreground"}`}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(X,{variant:"secondary",className:"text-xs px-1.5 py-0.5 h-auto",children:R(a.type)})})]}),e.jsx("p",{className:`text-sm line-clamp-2 mb-2 ${n?"text-blue-900 dark:text-blue-100":"text-[var(--form-text)]"}`,children:a.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.messages.length," messages"]}),n&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Active"})]})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:r=>I(r,a.id),className:"absolute top-2 right-2 w-6 h-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200 sidebar-button hover:bg-red-500/20 hover:text-red-400",children:e.jsx(ee,{className:"w-3 h-3"})})]},a.id)})})})]}),e.jsx(se,{open:C,onOpenChange:k,children:e.jsxs(te,{className:"glass-popup",children:[e.jsxs(ae,{children:[e.jsx(ne,{children:"Save Research to Library"}),e.jsx(ie,{children:"Enter a filename for your research. It will be saved as a text file in the Library."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-[var(--form-text)] mb-2 block",children:"Filename"}),e.jsx(E,{value:f,onChange:a=>D(a.target.value),placeholder:"Enter filename...",className:"form-input",onKeyDown:a=>{a.key==="Enter"&&T()}}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"File will be saved as .txt format"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(g,{variant:"outline",onClick:()=>k(!1),className:"form-button",children:"Cancel"}),e.jsx(g,{onClick:T,disabled:!f.trim(),className:"bg-gray-600 hover:bg-gray-700 text-white",children:"Save to Library"})]})]})]})})]})}function we({currentChat:l,isGenerating:j,onRateMessage:m}){const p=s=>{const d=(new Date().getTime()-s.getTime())/(1e3*60);return d<1?"Just now":d<60?`${Math.floor(d)}m ago`:d<1440?`${Math.floor(d/60)}h ago`:`${Math.floor(d/1440)}d ago`};return!l&&!j?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0 p-6",children:e.jsxs("div",{className:"text-center max-w-md w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(z,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-xl font-medium mb-2 text-[var(--form-text)]",children:"Start Your Research"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Ask AI to help with research, analysis, and insights. Select a research type and start asking questions."})]})}):e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[l&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center pb-6 border-b border-white/10",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-2",children:l.title}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[l.messages.length," messages"]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:p(l.lastActivity)}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:l.type.replace("-"," ")})]})]}),e.jsx(re,{initial:!1,children:l?.messages.map((s,h)=>e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`flex gap-4 ${s.type==="user"?"justify-end":"justify-start"}`,children:[s.type==="ai"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shrink-0",children:e.jsx(z,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:`max-w-[70%] ${s.type==="user"?"order-first":""}`,children:e.jsxs(K,{className:`p-4 glass-card ${s.type==="user"?"bg-blue-500/20 glass-strong":""}`,children:[e.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:s.content}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:p(s.timestamp)}),s.model&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:s.model})]}),s.tokens&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.tokens," tokens"]})]})]}),s.type==="ai"&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(s.content),className:"sidebar-button w-6 h-6 p-0",children:e.jsx(le,{className:"w-3 h-3"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>m(s.id,"up"),className:`sidebar-button w-6 h-6 p-0 ${s.rating==="up"?"text-green-400":""}`,children:e.jsx(be,{className:"w-3 h-3"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>m(s.id,"down"),className:`sidebar-button w-6 h-6 p-0 ${s.rating==="down"?"text-red-400":""}`,children:e.jsx(ge,{className:"w-3 h-3"})})]})]})]})}),s.type==="user"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-green-500 to-teal-600 flex items-center justify-center shrink-0",children:e.jsx(oe,{className:"w-4 h-4 text-white"})})]},s.id))}),j&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shrink-0",children:e.jsx(z,{className:"w-4 h-4 text-white"})}),e.jsx(K,{className:"glass-card p-4 max-w-[70%]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}}),e.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:"Researching..."})]})})]})]})}function ve({prompt:l,onPromptChange:j,onSubmit:m,isGenerating:p,onFileUpload:s,onVoiceInput:h}){const[d,w]=i.useState([]),[v,b]=i.useState(!1),y=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),l.trim()&&m())},N=o=>{w(C=>C.filter(k=>k.id!==o))};return e.jsxs("div",{className:"fixed bottom-0 left-[250px] right-0 bg-[var(--form-bg)] p-4 shadow-[0_-4px_12px_rgba(0,0,0,0.15)] z-10",children:[d.length>0&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(o=>e.jsxs(A.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex items-center gap-2 bg-[var(--form-input-bg)] rounded-lg p-2 shadow-[0_1px_3px_rgba(0,0,0,0.1)]",children:[e.jsx(ce,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:o.name}),e.jsx("span",{className:"text-muted-foreground ml-2",children:o.size})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>N(o.id),className:"w-6 h-6 p-0 hover:bg-red-500/10 hover:text-red-500",children:e.jsx(de,{className:"w-3 h-3"})})]},o.id))})}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(me,{value:l,onChange:o=>j(o.target.value),onKeyDown:y,placeholder:"Ask me anything about research, trends, market analysis, or consumer insights...",className:"form-input resize-none min-h-[60px] max-h-[200px]",disabled:p,rows:2})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(g,{onClick:m,disabled:!l.trim()||p,className:"w-12 h-10 p-0 bg-purple-600 hover:bg-purple-700 text-white shadow-[0_2px_6px_rgba(147,51,234,0.3)]",children:p?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(he,{className:"w-4 h-4"})})})]}),l.length>0&&e.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:"Press Enter to send, Shift + Enter for new line"}),e.jsxs("span",{className:l.length>3500?"text-orange-400":l.length>3800?"text-red-400":"",children:[l.length,"/4000"]})]})]})}const Ne=i.forwardRef((l,j)=>{const[m,p]=i.useState("market-research"),[s,h]=i.useState(null),[d,w]=i.useState(""),[v,b]=i.useState(!1),[y,N]=i.useState([{id:"1",title:"Market Research Q4 2024",type:"market-research",messages:[{id:"1",type:"user",content:"What are the latest trends in AI marketing for Q4 2024?",timestamp:new Date(Date.now()-1e3*60*30)},{id:"2",type:"ai",content:`Based on recent industry analysis, here are the key AI marketing trends for Q4 2024:

1. **Hyper-Personalization at Scale**: AI is enabling brands to create individualized experiences for millions of customers simultaneously.

2. **Conversational AI Integration**: Advanced chatbots and voice assistants are becoming primary customer touchpoints.

3. **Predictive Content Creation**: AI tools are helping marketers generate content that predicts and meets future customer needs.

4. **Real-time Sentiment Analysis**: Brands are using AI to monitor and respond to customer sentiment across all channels instantly.

5. **AI-Powered Attribution Modeling**: More sophisticated tracking of customer journeys across multiple touchpoints.`,timestamp:new Date(Date.now()-1e3*60*25),model:"GPT-4",tokens:342,rating:"up"}],lastActivity:new Date(Date.now()-1e3*60*25)},{id:"2",title:"Consumer Behavior Analysis",type:"consumer-research",messages:[{id:"3",type:"user",content:"How has consumer behavior changed post-pandemic?",timestamp:new Date(Date.now()-1e3*60*60*2)},{id:"4",type:"ai",content:`Post-pandemic consumer behavior has undergone significant shifts:

**Digital-First Mindset**: Consumers now expect seamless digital experiences as the primary interaction method.

**Value-Conscious Spending**: Increased focus on value, quality, and purpose-driven purchases.

**Health & Wellness Priority**: Heightened awareness of health, safety, and wellness in purchasing decisions.

**Local & Sustainable Focus**: Growing preference for local businesses and sustainable products.`,timestamp:new Date(Date.now()-1e3*60*60*2),model:"Claude-3",tokens:198}],lastActivity:new Date(Date.now()-1e3*60*60*2)}]),o=i.useMemo(()=>({"market-research":"Market Research","consumer-research":"Consumer Research","competitor-analysis":"Competitor Analysis","trend-analysis":"Trend Analysis"})[m]||"Research",[m]),C=i.useCallback((t,n,r)=>{if(t.length===0||!n.trim())return;const u=n.length>50?`${n.substring(0,47)}...`:n,c={id:s?.id||Date.now().toString(),title:u,type:r,messages:t,lastActivity:new Date};N(S=>{const H=S.findIndex(_=>_.id===c.id);if(H!==-1){const _=[...S];return _[H]=c,_}else return[c,...S]}),h(c)},[s]),k=i.useCallback(t=>{p(t)},[]),f=i.useCallback(()=>{const t={id:Date.now().toString(),title:"New Research Chat",type:m,messages:[],lastActivity:new Date};N(n=>[t,...n]),h(t),w(""),x.success("New research chat created",{description:"Ready to assist with your research needs"})},[m]);i.useImperativeHandle(j,()=>({createNewSession:f}));const D=i.useCallback(t=>{const n=y.find(r=>r.id===t);n&&(h(n),p(n.type),w(""))},[y]),M=i.useCallback(async()=>{if(!d.trim()){x.error("Please enter a research question");return}s||f(),b(!0);const t={id:Date.now().toString(),type:"user",content:d.trim(),timestamp:new Date},n=[...s?.messages||[],t];h(r=>r?{...r,messages:n}:null),w("");try{await new Promise(c=>setTimeout(c,2e3+Math.random()*1e3));const r={id:(Date.now()+1).toString(),type:"ai",content:`I understand you're researching: "${t.content}"

Let me provide you with comprehensive research insights on this topic. Based on current data and industry analysis, here are the key findings:

• **Primary Research Insight**: This area shows significant growth potential with emerging trends indicating strong market adoption.

• **Data Analysis**: Recent studies suggest a 25-40% increase in related activities over the past quarter.

• **Competitive Landscape**: Key players are investing heavily in this space, indicating market validation.

• **Recommendations**: Consider exploring this opportunity further with targeted market testing and customer validation.

**Sources**: Industry reports, market analysis, peer-reviewed studies

Would you like me to dive deeper into any specific aspect of this research?`,timestamp:new Date,model:"GPT-4 Research",tokens:Math.floor(Math.random()*300)+150},u=[...n,r];if(s){const c={...s,messages:u,lastActivity:new Date};h(c),C(u,t.content,m)}x.success("Research completed successfully!")}catch(r){x.error("Failed to complete research"),console.error(r)}finally{b(!1)}},[d,s,m,C,f]),R=i.useCallback((t,n)=>{if(!s)return;const r=s.messages.map(c=>c.id===t?{...c,rating:n}:c),u={...s,messages:r};h(u),N(c=>c.map(S=>S.id===s.id?u:S)),x.success(`Feedback recorded: ${n==="up"?"Helpful":"Not helpful"}`)},[s]),$=i.useCallback(t=>{if(y.length<=1){x.error("Cannot delete the last session");return}if(N(n=>n.filter(r=>r.id!==t)),s?.id===t){const n=y.filter(r=>r.id!==t);h(n[0]||null)}x.success("Research chat deleted")},[y,s]),I=i.useCallback(t=>{x.success(`File "${t.name}" uploaded successfully!`)},[]),L=i.useCallback(()=>{x.info("Voice input feature coming soon!")},[]),T=i.useCallback((t,n)=>{const r=new Blob([t],{type:"text/plain"}),u=URL.createObjectURL(r),c=document.createElement("a");c.href=u,c.download=n,c.click(),URL.revokeObjectURL(u)},[]),a=i.useCallback(()=>{if(!s||s.messages.length===0)return"";const t=s.messages.map(n=>{const r=n.timestamp.toLocaleString(),u=n.type==="user"?"Question":"Research Findings";return`[${r}] ${u}:
${n.content}
`}).join(`
`);return`Research Session: ${s.title}
Type: ${o}
Date: ${s.lastActivity.toLocaleDateString()}

${t}`},[s,o]);return e.jsxs("div",{className:"h-full flex bg-background overflow-hidden",children:[e.jsx(ue,{intensity:"light"}),e.jsxs("div",{className:"relative z-10 h-full flex w-full",children:[e.jsx(je,{selectedType:m,onTypeSelect:k,onNewChat:f,onChatSelect:D,onDeleteSession:$,onSaveToLibrary:T,savedChats:y,currentChatId:s?.id||null,currentContent:a()}),e.jsx("div",{className:"flex-1 flex flex-col min-w-0",children:e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-6 pb-32",children:e.jsx(we,{currentChat:s,isGenerating:v,onRateMessage:R})}),e.jsx(ve,{prompt:d,onPromptChange:w,onSubmit:M,isGenerating:v,onFileUpload:I,onVoiceInput:L})]})})]})]})});Ne.displayName="Research";export{Ne as default};
